import{a6 as Q,j as we,b as A,a0 as Pe,p as ne,r as O,x as Be,N as Ve,K as Me,m as De,h as k,A as oe,a7 as Re,q as F,R as H,C as w,o as m,w as M,k as Z,d as B,n as c,l as W,s as ce,c as x,L as V,W as K,t as N,U as q,J as _,e as de,$ as He,a as Ke,a8 as te,z as Ne,O as se,i as le,Q as ke,a9 as Te,aa as fe,G as Se}from"./index-CLDwlYaq.js";import{g as Fe,n as Ie,ao as ee,r as me,ap as ve,D as Ue,L as Le,aq as pe,ar as Ye,as as Xe,at as je,au as ge,J as We,K as qe,_ as Ge,a1 as Je,d as Qe,av as Ze,a as xe,aw as _e,ax as he,$ as ye,s as Ce,ay as be,H as en}from"./el-menu-item-Dlu7__-N.js";import{E as nn}from"./index-D8atevoS.js";import{i as on}from"./validator-CbVEcS5_.js";import{g as tn}from"./scroll-BZPpWjhz.js";const Oe=e=>{if(!e)return{onClick:Q,onMousedown:Q,onMouseup:Q};let s=!1,t=!1;return{onClick:i=>{s&&t&&e(i),s=t=!1},onMousedown:i=>{s=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},sn=Fe({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:me([String,Array,Object])},zIndex:{type:me([String,Number])}}),an={click:e=>e instanceof MouseEvent},ln="overlay";var rn=we({name:"ElOverlay",props:sn,emits:an,setup(e,{slots:s,emit:t}){const l=Ie(ln),a=d=>{t("click",d)},{onClick:o,onMousedown:i,onMouseup:u}=Oe(e.customMaskEvent?void 0:a);return()=>e.mask?A("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:o,onMousedown:i,onMouseup:u},[ne(s,"default")],ee.STYLE|ee.CLASS|ee.PROPS,["onClick","onMouseup","onMousedown"]):Pe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ne(s,"default")])}});const un=rn,cn=(e,s,t,l)=>{const a={offsetX:0,offsetY:0},o=O(!1),i=(v,C)=>{if(e.value){const{offsetX:z,offsetY:p}=a,E=e.value.getBoundingClientRect(),g=E.left,b=E.top,I=E.width,P=E.height,R=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,G=-g+z,L=-b+p,X=R-g-I+z,J=Y-b-(P<Y?P:0)+p;l?.value||(v=Math.min(Math.max(v,G),X),C=Math.min(Math.max(C,L),J)),a.offsetX=v,a.offsetY=C,e.value.style.transform=`translate(${ve(v)}, ${ve(C)})`}},u=v=>{const C=v.clientX,z=v.clientY,{offsetX:p,offsetY:E}=a,g=I=>{o.value||(o.value=!0);const P=p+I.clientX-C,R=E+I.clientY-z;i(P,R)},b=()=>{o.value=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",b)},d=()=>{s.value&&e.value&&(s.value.addEventListener("mousedown",u),window.addEventListener("resize",f))},n=()=>{s.value&&e.value&&(s.value.removeEventListener("mousedown",u),window.removeEventListener("resize",f))},S=()=>{a.offsetX=0,a.offsetY=0,e.value&&(e.value.style.transform="")},f=()=>{const{offsetX:v,offsetY:C}=a;i(v,C)};return Be(()=>{Ve(()=>{t.value?d():n()})}),Me(()=>{n()}),{isDragging:o,resetPosition:S,updatePosition:f}},dn=(e,s={})=>{De(e)||Ue("[useLockscreen]","You need to pass a ref param to this function");const t=s.ns||Ie("popup"),l=k(()=>t.bm("parent","hidden"));if(!Le||pe(document.body,l.value))return;let a=0,o=!1,i="0";const u=()=>{setTimeout(()=>{typeof document>"u"||o&&document&&(document.body.style.width=i,je(document.body,l.value))},200)};oe(e,d=>{if(!d){u();return}o=!pe(document.body,l.value),o&&(i=document.body.style.width,Ye(document.body,l.value)),a=tn(t.namespace.value);const n=document.documentElement.clientHeight<document.body.scrollHeight,S=Xe(document.body,"overflowY");a>0&&(n||S==="scroll")&&o&&(document.body.style.width=`calc(100% - ${a}px)`)}),Re(()=>u())},ae="_trap-focus-children",$=[],Ee=e=>{if($.length===0)return;const s=We(e),t=$[$.length-1][ae];if(t.length>0&&s===qe.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const l=e.shiftKey,a=e.target===t[0],o=e.target===t[t.length-1];a&&l&&(e.preventDefault(),t[t.length-1].focus()),o&&!l&&(e.preventDefault(),t[0].focus())}},fn={beforeMount(e){e[ae]=ge(e),$.push(e),$.length<=1&&document.addEventListener("keydown",Ee)},updated(e){F(()=>{e[ae]=ge(e)})},unmounted(){$.shift(),$.length===0&&document.removeEventListener("keydown",Ee)}},mn=we({name:"ElMessageBox",directives:{TrapFocus:fn},components:{ElButton:xe,ElFocusTrap:Ze,ElInput:nn,ElOverlay:un,ElIcon:Qe,...Je},inheritAttrs:!1,props:{buttonSize:{type:String,validator:on},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:s}){const{locale:t,zIndex:l,ns:a,size:o}=_e("message-box",k(()=>e.buttonSize)),{t:i}=t,{nextZIndex:u}=l,d=O(!1),n=Ke({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:te(he),cancelButtonLoadingIcon:te(he),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:u()}),S=k(()=>{const r=n.type;return{[a.bm("icon",r)]:r&&ye[r]}}),f=Ce(),v=Ce(),C=k(()=>{const r=n.type;return n.icon||r&&ye[r]||""}),z=k(()=>!!n.message),p=O(),E=O(),g=O(),b=O(),I=O(),P=k(()=>n.confirmButtonClass);oe(()=>n.inputValue,async r=>{await F(),e.boxType==="prompt"&&r&&ie()},{immediate:!0}),oe(()=>d.value,r=>{var h,y;r&&(e.boxType!=="prompt"&&(n.autofocus?g.value=(y=(h=I.value)==null?void 0:h.$el)!=null?y:p.value:g.value=p.value),n.zIndex=u()),e.boxType==="prompt"&&(r?F().then(()=>{var ue;b.value&&b.value.$el&&(n.autofocus?g.value=(ue=$e())!=null?ue:p.value:g.value=p.value)}):(n.editorErrorMessage="",n.validateError=!1))});const R=k(()=>e.draggable),Y=k(()=>e.overflow),{isDragging:G}=cn(p,E,R,Y);Be(async()=>{await F(),e.closeOnHashChange&&window.addEventListener("hashchange",L)}),Me(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",L)});function L(){d.value&&(d.value=!1,F(()=>{n.action&&s("action",n.action)}))}const X=()=>{e.closeOnClickModal&&j(n.distinguishCancelAndClose?"close":"cancel")},J=Oe(X),Ae=r=>{if(n.inputType!=="textarea")return r.preventDefault(),j("confirm")},j=r=>{var h;e.boxType==="prompt"&&r==="confirm"&&!ie()||(n.action=r,n.beforeClose?(h=n.beforeClose)==null||h.call(n,r,n,L):L())},ie=()=>{if(e.boxType==="prompt"){const r=n.inputPattern;if(r&&!r.test(n.inputValue||""))return n.editorErrorMessage=n.inputErrorMessage||i("el.messagebox.error"),n.validateError=!0,!1;const h=n.inputValidator;if(se(h)){const y=h(n.inputValue);if(y===!1)return n.editorErrorMessage=n.inputErrorMessage||i("el.messagebox.error"),n.validateError=!0,!1;if(le(y))return n.editorErrorMessage=y,n.validateError=!0,!1}}return n.editorErrorMessage="",n.validateError=!1,!0},$e=()=>{var r,h;const y=(r=b.value)==null?void 0:r.$refs;return(h=y?.input)!=null?h:y?.textarea},re=()=>{j("close")},ze=()=>{e.closeOnPressEscape&&re()};return e.lockScroll&&dn(d),{...Ne(n),ns:a,overlayEvent:J,visible:d,hasMessage:z,typeClass:S,contentId:f,inputId:v,btnSize:o,iconComponent:C,confirmButtonClasses:P,rootRef:p,focusStartRef:g,headerRef:E,inputRef:b,isDragging:G,confirmRef:I,doClose:L,handleClose:re,onCloseRequested:ze,handleWrapperClick:X,handleInputEnter:Ae,handleAction:j,t:i}}});function vn(e,s,t,l,a,o){const i=H("el-icon"),u=H("el-input"),d=H("el-button"),n=H("el-focus-trap"),S=H("el-overlay");return m(),w(He,{name:"fade-in-linear",onAfterLeave:f=>e.$emit("vanish"),persisted:""},{default:M(()=>[Z(A(S,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:M(()=>[B("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:c(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[A(n,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:M(()=>[B("div",{ref:"rootRef",class:c([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),e.ns.is("dragging",e.isDragging),{[e.ns.m("center")]:e.center}]),style:ce(e.customStyle),tabindex:"-1",onClick:W(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(m(),x("div",{key:0,ref:"headerRef",class:c([e.ns.e("header"),{"show-close":e.showClose}])},[B("div",{class:c(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),w(i,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:M(()=>[(m(),w(K(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),B("span",null,N(e.title),1)],2),e.showClose?(m(),x("button",{key:0,type:"button",class:c(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:q(W(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[A(i,{class:c(e.ns.e("close"))},{default:M(()=>[(m(),w(K(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):V("v-if",!0)],2)):V("v-if",!0),B("div",{id:e.contentId,class:c(e.ns.e("content"))},[B("div",{class:c(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),w(i,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:M(()=>[(m(),w(K(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),e.hasMessage?(m(),x("div",{key:1,class:c(e.ns.e("message"))},[ne(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),w(K(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),w(K(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0,textContent:N(e.message)},null,8,["for","textContent"]))])],2)):V("v-if",!0)],2),Z(B("div",{class:c(e.ns.e("input"))},[A(u,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":f=>e.inputValue=f,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:c({invalid:e.validateError}),onKeydown:q(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),B("div",{class:c(e.ns.e("errormsg")),style:ce({visibility:e.editorErrorMessage?"visible":"hidden"})},N(e.editorErrorMessage),7)],2),[[_,e.showInput]])],10,["id"]),B("div",{class:c(e.ns.e("btns"))},[e.showCancelButton?(m(),w(d,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:c([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:f=>e.handleAction("cancel"),onKeydown:q(W(f=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:M(()=>[de(N(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):V("v-if",!0),Z(A(d,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:c([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:f=>e.handleAction("confirm"),onKeydown:q(W(f=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:M(()=>[de(N(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[_,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[_,e.visible]])]),_:3},8,["onAfterLeave"])}var pn=Ge(mn,[["render",vn],["__file","index.vue"]]);const U=new Map,gn=e=>{let s=document.body;return e.appendTo&&(le(e.appendTo)&&(s=document.querySelector(e.appendTo)),be(e.appendTo)&&(s=e.appendTo),be(s)||(s=document.body)),s},hn=(e,s,t=null)=>{const l=A(pn,e,se(e.message)||ke(e.message)?{default:se(e.message)?e.message:()=>e.message}:null);return l.appContext=t,Te(l,s),gn(e).appendChild(s.firstElementChild),l.component},yn=()=>document.createElement("div"),Cn=(e,s)=>{const t=yn();e.onVanish=()=>{Te(null,t),U.delete(a)},e.onAction=o=>{const i=U.get(a);let u;e.showInput?u={value:a.inputValue,action:o}:u=o,e.callback?e.callback(u,l.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(u)};const l=hn(e,t,s),a=l.proxy;for(const o in e)fe(e,o)&&!fe(a.$props,o)&&(o==="closeIcon"&&Se(e[o])?a[o]=te(e[o]):a[o]=e[o]);return a.visible=!0,a};function D(e,s=null){if(!Le)return Promise.reject();let t;return le(e)||ke(e)?e={message:e}:t=e.callback,new Promise((l,a)=>{const o=Cn(e,s??D._context);U.set(o,{options:e,callback:t,resolve:l,reject:a})})}const bn=["alert","confirm","prompt"],En={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};bn.forEach(e=>{D[e]=wn(e)});function wn(e){return(s,t,l,a)=>{let o="";return Se(t)?(l=t,o=""):en(t)?o="":o=t,D(Object.assign({title:o,message:s,type:"",...En[e]},l,{boxType:e}),a)}}D.close=()=>{U.forEach((e,s)=>{s.doClose()}),U.clear()};D._context=null;const T=D;T.install=e=>{T._context=e._context,e.config.globalProperties.$msgbox=T,e.config.globalProperties.$messageBox=T,e.config.globalProperties.$alert=T.alert,e.config.globalProperties.$confirm=T.confirm,e.config.globalProperties.$prompt=T.prompt};const In=T;export{In as E};
